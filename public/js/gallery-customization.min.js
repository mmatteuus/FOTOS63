class GalleryCustomizationSystem{constructor(){this.currentTheme=null,this.customizations={colors:{},fonts:{},layout:{},branding:{},social:{}},this.previewMode=!1,this.initializeSystem()}initializeSystem(){this.loadPhotographerSettings(),this.setupEventListeners()}async loadPhotographerSettings(){try{const e=await fetch("/api/photographer/customization",{headers:{Authorization:`Bearer ${this.getAuthToken()}`}});if(e.ok){const t=await e.json();this.customizations={...this.customizations,...t},this.currentTheme=t.theme||"default"}}catch(e){console.error("Error loading photographer settings:",e)}}async saveCustomizations(){try{const e=await fetch("/api/photographer/customization",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({theme:this.currentTheme,customizations:this.customizations,updatedAt:(new Date).toISOString()})});if(!e.ok)throw new Error("Failed to save customizations");return await e.json()}catch(e){throw console.error("Error saving customizations:",e),e}}createCustomizationUI(e){const t=document.getElementById(e);t?(t.innerHTML='\n            <div class="gallery-customization">\n                <div class="customization-header">\n                    <h3><i class="bi bi-palette"></i> Personalizar Galeria</h3>\n                    <p>Customize sua galeria para refletir sua marca pessoal</p>\n                </div>\n\n                <div class="customization-tabs">\n                    <button class="tab-button active" data-tab="theme">Tema</button>\n                    <button class="tab-button" data-tab="colors">Cores</button>\n                    <button class="tab-button" data-tab="typography">Tipografia</button>\n                    <button class="tab-button" data-tab="layout">Layout</button>\n                    <button class="tab-button" data-tab="branding">Marca</button>\n                    <button class="tab-button" data-tab="social">Social</button>\n                </div>\n\n                <div class="customization-content">\n                    \x3c!-- Theme Tab --\x3e\n                    <div class="tab-content active" id="theme-tab">\n                        <h4>Escolha um Tema Base</h4>\n                        <div class="theme-grid">\n                            <div class="theme-option" data-theme="default">\n                                <div class="theme-preview default-theme"></div>\n                                <span>Padrão</span>\n                            </div>\n                            <div class="theme-option" data-theme="minimal">\n                                <div class="theme-preview minimal-theme"></div>\n                                <span>Minimalista</span>\n                            </div>\n                            <div class="theme-option" data-theme="elegant">\n                                <div class="theme-preview elegant-theme"></div>\n                                <span>Elegante</span>\n                            </div>\n                            <div class="theme-option" data-theme="modern">\n                                <div class="theme-preview modern-theme"></div>\n                                <span>Moderno</span>\n                            </div>\n                            <div class="theme-option" data-theme="artistic">\n                                <div class="theme-preview artistic-theme"></div>\n                                <span>Artístico</span>\n                            </div>\n                            <div class="theme-option" data-theme="professional">\n                                <div class="theme-preview professional-theme"></div>\n                                <span>Profissional</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Colors Tab --\x3e\n                    <div class="tab-content" id="colors-tab">\n                        <h4>Esquema de Cores</h4>\n                        <div class="color-section">\n                            <div class="color-group">\n                                <label>Cor Primária</label>\n                                <input type="color" id="primaryColor" value="#FFD700">\n                                <span class="color-preview" id="primaryPreview">#FFD700</span>\n                            </div>\n                            <div class="color-group">\n                                <label>Cor Secundária</label>\n                                <input type="color" id="secondaryColor" value="#FF8C00">\n                                <span class="color-preview" id="secondaryPreview">#FF8C00</span>\n                            </div>\n                            <div class="color-group">\n                                <label>Cor de Fundo</label>\n                                <input type="color" id="backgroundColor" value="#FFFFFF">\n                                <span class="color-preview" id="backgroundPreview">#FFFFFF</span>\n                            </div>\n                            <div class="color-group">\n                                <label>Cor do Texto</label>\n                                <input type="color" id="textColor" value="#2C2C2C">\n                                <span class="color-preview" id="textPreview">#2C2C2C</span>\n                            </div>\n                        </div>\n                        \n                        <div class="preset-colors">\n                            <h5>Paletas Pré-definidas</h5>\n                            <div class="palette-grid">\n                                <div class="palette-option" data-palette="sunset">\n                                    <div class="palette-colors">\n                                        <span style="background: #FF6B35"></span>\n                                        <span style="background: #F7931E"></span>\n                                        <span style="background: #FFD23F"></span>\n                                        <span style="background: #FFFFFF"></span>\n                                    </div>\n                                    <span>Pôr do Sol</span>\n                                </div>\n                                <div class="palette-option" data-palette="ocean">\n                                    <div class="palette-colors">\n                                        <span style="background: #006A6B"></span>\n                                        <span style="background: #0E4B99"></span>\n                                        <span style="background: #2E8BC0"></span>\n                                        <span style="background: #FFFFFF"></span>\n                                    </div>\n                                    <span>Oceano</span>\n                                </div>\n                                <div class="palette-option" data-palette="forest">\n                                    <div class="palette-colors">\n                                        <span style="background: #2D5016"></span>\n                                        <span style="background: #61892F"></span>\n                                        <span style="background: #86C232"></span>\n                                        <span style="background: #FFFFFF"></span>\n                                    </div>\n                                    <span>Floresta</span>\n                                </div>\n                                <div class="palette-option" data-palette="monochrome">\n                                    <div class="palette-colors">\n                                        <span style="background: #000000"></span>\n                                        <span style="background: #666666"></span>\n                                        <span style="background: #CCCCCC"></span>\n                                        <span style="background: #FFFFFF"></span>\n                                    </div>\n                                    <span>Monocromático</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Typography Tab --\x3e\n                    <div class="tab-content" id="typography-tab">\n                        <h4>Tipografia</h4>\n                        <div class="typography-section">\n                            <div class="font-group">\n                                <label>Fonte Principal</label>\n                                <select id="primaryFont">\n                                    <option value="Poppins">Poppins (Padrão)</option>\n                                    <option value="Roboto">Roboto</option>\n                                    <option value="Open Sans">Open Sans</option>\n                                    <option value="Lato">Lato</option>\n                                    <option value="Montserrat">Montserrat</option>\n                                    <option value="Playfair Display">Playfair Display</option>\n                                    <option value="Merriweather">Merriweather</option>\n                                    <option value="Source Sans Pro">Source Sans Pro</option>\n                                </select>\n                            </div>\n                            \n                            <div class="font-group">\n                                <label>Fonte Secundária</label>\n                                <select id="secondaryFont">\n                                    <option value="Poppins">Poppins</option>\n                                    <option value="Roboto">Roboto</option>\n                                    <option value="Open Sans">Open Sans (Padrão)</option>\n                                    <option value="Lato">Lato</option>\n                                    <option value="Montserrat">Montserrat</option>\n                                    <option value="Georgia">Georgia</option>\n                                    <option value="Times New Roman">Times New Roman</option>\n                                </select>\n                            </div>\n\n                            <div class="font-size-group">\n                                <label>Tamanho do Título</label>\n                                <input type="range" id="titleSize" min="24" max="48" value="32">\n                                <span id="titleSizeValue">32px</span>\n                            </div>\n\n                            <div class="font-size-group">\n                                <label>Tamanho do Texto</label>\n                                <input type="range" id="textSize" min="12" max="20" value="16">\n                                <span id="textSizeValue">16px</span>\n                            </div>\n                        </div>\n\n                        <div class="typography-preview">\n                            <h5>Prévia da Tipografia</h5>\n                            <div class="preview-text">\n                                <h2 id="previewTitle">Título da Galeria</h2>\n                                <p id="previewText">Este é um exemplo de como o texto aparecerá na sua galeria personalizada.</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Layout Tab --\x3e\n                    <div class="tab-content" id="layout-tab">\n                        <h4>Layout da Galeria</h4>\n                        <div class="layout-section">\n                            <div class="layout-group">\n                                <label>Estilo de Grid</label>\n                                <div class="grid-options">\n                                    <div class="grid-option" data-grid="masonry">\n                                        <div class="grid-preview masonry-preview"></div>\n                                        <span>Masonry</span>\n                                    </div>\n                                    <div class="grid-option" data-grid="square">\n                                        <div class="grid-preview square-preview"></div>\n                                        <span>Quadrado</span>\n                                    </div>\n                                    <div class="grid-option" data-grid="justified">\n                                        <div class="grid-preview justified-preview"></div>\n                                        <span>Justificado</span>\n                                    </div>\n                                    <div class="grid-option" data-grid="list">\n                                        <div class="grid-preview list-preview"></div>\n                                        <span>Lista</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="spacing-group">\n                                <label>Espaçamento entre Fotos</label>\n                                <input type="range" id="photoSpacing" min="5" max="30" value="15">\n                                <span id="spacingValue">15px</span>\n                            </div>\n\n                            <div class="columns-group">\n                                <label>Colunas (Desktop)</label>\n                                <input type="range" id="desktopColumns" min="2" max="6" value="4">\n                                <span id="desktopColumnsValue">4</span>\n                            </div>\n\n                            <div class="columns-group">\n                                <label>Colunas (Mobile)</label>\n                                <input type="range" id="mobileColumns" min="1" max="3" value="2">\n                                <span id="mobileColumnsValue">2</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Branding Tab --\x3e\n                    <div class="tab-content" id="branding-tab">\n                        <h4>Marca Pessoal</h4>\n                        <div class="branding-section">\n                            <div class="logo-group">\n                                <label>Logo/Avatar</label>\n                                <div class="logo-upload">\n                                    <div class="logo-preview" id="logoPreview">\n                                        <i class="bi bi-person-circle"></i>\n                                    </div>\n                                    <button class="btn btn-outline-primary" id="uploadLogo">\n                                        <i class="bi bi-upload"></i> Upload Logo\n                                    </button>\n                                    <input type="file" id="logoInput" accept="image/*" style="display: none;">\n                                </div>\n                            </div>\n\n                            <div class="info-group">\n                                <label>Nome/Título da Galeria</label>\n                                <input type="text" id="galleryTitle" placeholder="Minha Galeria de Fotos">\n                            </div>\n\n                            <div class="info-group">\n                                <label>Biografia/Descrição</label>\n                                <textarea id="galleryBio" rows="4" placeholder="Conte um pouco sobre seu trabalho..."></textarea>\n                            </div>\n\n                            <div class="contact-group">\n                                <label>Informações de Contato</label>\n                                <input type="email" id="contactEmail" placeholder="seu@email.com">\n                                <input type="tel" id="contactPhone" placeholder="(63) 99999-9999">\n                                <input type="text" id="contactWebsite" placeholder="www.seusite.com">\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Social Tab --\x3e\n                    <div class="tab-content" id="social-tab">\n                        <h4>Redes Sociais</h4>\n                        <div class="social-section">\n                            <div class="social-group">\n                                <label><i class="bi bi-instagram"></i> Instagram</label>\n                                <input type="text" id="instagramHandle" placeholder="@seuinstagram">\n                            </div>\n\n                            <div class="social-group">\n                                <label><i class="bi bi-facebook"></i> Facebook</label>\n                                <input type="url" id="facebookUrl" placeholder="https://facebook.com/seuperfil">\n                            </div>\n\n                            <div class="social-group">\n                                <label><i class="bi bi-twitter"></i> Twitter</label>\n                                <input type="text" id="twitterHandle" placeholder="@seutwitter">\n                            </div>\n\n                            <div class="social-group">\n                                <label><i class="bi bi-linkedin"></i> LinkedIn</label>\n                                <input type="url" id="linkedinUrl" placeholder="https://linkedin.com/in/seuperfil">\n                            </div>\n\n                            <div class="social-group">\n                                <label><i class="bi bi-youtube"></i> YouTube</label>\n                                <input type="url" id="youtubeUrl" placeholder="https://youtube.com/c/seucanal">\n                            </div>\n\n                            <div class="social-group">\n                                <label><i class="bi bi-whatsapp"></i> WhatsApp</label>\n                                <input type="tel" id="whatsappNumber" placeholder="(63) 99999-9999">\n                            </div>\n                        </div>\n\n                        <div class="social-display">\n                            <h5>Exibição das Redes Sociais</h5>\n                            <div class="display-options">\n                                <label>\n                                    <input type="radio" name="socialDisplay" value="icons" checked>\n                                    Apenas Ícones\n                                </label>\n                                <label>\n                                    <input type="radio" name="socialDisplay" value="buttons">\n                                    Botões com Texto\n                                </label>\n                                <label>\n                                    <input type="radio" name="socialDisplay" value="list">\n                                    Lista Vertical\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="customization-actions">\n                    <button class="btn btn-outline-secondary" id="previewGallery">\n                        <i class="bi bi-eye"></i> Visualizar\n                    </button>\n                    <button class="btn btn-secondary" id="resetCustomizations">\n                        <i class="bi bi-arrow-clockwise"></i> Resetar\n                    </button>\n                    <button class="btn btn-primary" id="saveCustomizations">\n                        <i class="bi bi-check-lg"></i> Salvar Alterações\n                    </button>\n                </div>\n\n                <div class="gallery-preview" id="galleryPreview" style="display: none;">\n                    <div class="preview-header">\n                        <h4>Prévia da Galeria</h4>\n                        <button class="btn btn-sm btn-outline-secondary" id="closePreview">\n                            <i class="bi bi-x"></i>\n                        </button>\n                    </div>\n                    <div class="preview-content" id="previewContent">\n                        \x3c!-- Preview will be generated here --\x3e\n                    </div>\n                </div>\n            </div>\n        ',this.setupCustomizationEvents(),this.loadCurrentSettings()):console.error(`Container ${e} not found`)}setupCustomizationEvents(){document.querySelectorAll(".tab-button").forEach(e=>{e.addEventListener("click",e=>{this.switchTab(e.target.dataset.tab)})}),document.querySelectorAll(".theme-option").forEach(e=>{e.addEventListener("click",e=>{this.selectTheme(e.currentTarget.dataset.theme)})}),document.querySelectorAll('input[type="color"]').forEach(e=>{e.addEventListener("change",e=>{this.updateColor(e.target.id,e.target.value)})}),document.querySelectorAll(".palette-option").forEach(e=>{e.addEventListener("click",e=>{this.applyColorPalette(e.currentTarget.dataset.palette)})}),document.getElementById("primaryFont").addEventListener("change",e=>{this.updateFont("primary",e.target.value)}),document.getElementById("secondaryFont").addEventListener("change",e=>{this.updateFont("secondary",e.target.value)}),document.getElementById("titleSize").addEventListener("input",e=>{this.updateFontSize("title",e.target.value)}),document.getElementById("textSize").addEventListener("input",e=>{this.updateFontSize("text",e.target.value)}),document.querySelectorAll(".grid-option").forEach(e=>{e.addEventListener("click",e=>{this.selectGridStyle(e.currentTarget.dataset.grid)})}),document.getElementById("photoSpacing").addEventListener("input",e=>{this.updateSpacing(e.target.value)}),document.getElementById("desktopColumns").addEventListener("input",e=>{this.updateColumns("desktop",e.target.value)}),document.getElementById("mobileColumns").addEventListener("input",e=>{this.updateColumns("mobile",e.target.value)}),document.getElementById("uploadLogo").addEventListener("click",()=>{document.getElementById("logoInput").click()}),document.getElementById("logoInput").addEventListener("change",e=>{this.handleLogoUpload(e.target.files[0])}),document.getElementById("previewGallery").addEventListener("click",()=>{this.showGalleryPreview()}),document.getElementById("resetCustomizations").addEventListener("click",()=>{this.resetToDefaults()}),document.getElementById("saveCustomizations").addEventListener("click",()=>{this.saveSettings()}),document.getElementById("closePreview").addEventListener("click",()=>{this.closeGalleryPreview()})}switchTab(e){document.querySelectorAll(".tab-button").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelectorAll(".tab-content").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-tab`).classList.add("active")}selectTheme(e){this.currentTheme=e,document.querySelectorAll(".theme-option").forEach(e=>{e.classList.remove("selected")}),document.querySelector(`[data-theme="${e}"]`).classList.add("selected"),this.applyThemeDefaults(e)}applyThemeDefaults(e){const t={default:{colors:{primary:"#FFD700",secondary:"#FF8C00",background:"#FFFFFF",text:"#2C2C2C"},fonts:{primary:"Poppins",secondary:"Open Sans"}},minimal:{colors:{primary:"#000000",secondary:"#666666",background:"#FFFFFF",text:"#333333"},fonts:{primary:"Roboto",secondary:"Roboto"}},elegant:{colors:{primary:"#8B4513",secondary:"#D2691E",background:"#FFF8DC",text:"#2F4F4F"},fonts:{primary:"Playfair Display",secondary:"Merriweather"}},modern:{colors:{primary:"#4A90E2",secondary:"#7ED321",background:"#F5F5F5",text:"#2C3E50"},fonts:{primary:"Montserrat",secondary:"Lato"}},artistic:{colors:{primary:"#E74C3C",secondary:"#F39C12",background:"#2C3E50",text:"#ECF0F1"},fonts:{primary:"Playfair Display",secondary:"Georgia"}},professional:{colors:{primary:"#2C3E50",secondary:"#3498DB",background:"#FFFFFF",text:"#2C3E50"},fonts:{primary:"Source Sans Pro",secondary:"Source Sans Pro"}}},n=t[e]||t.default;document.getElementById("primaryColor").value=n.colors.primary,document.getElementById("secondaryColor").value=n.colors.secondary,document.getElementById("backgroundColor").value=n.colors.background,document.getElementById("textColor").value=n.colors.text,document.getElementById("primaryFont").value=n.fonts.primary,document.getElementById("secondaryFont").value=n.fonts.secondary,this.customizations.colors=n.colors,this.customizations.fonts=n.fonts,this.updateColorPreviews(),this.updateTypographyPreview()}updateColor(e,t){const n={primaryColor:"primary",secondaryColor:"secondary",backgroundColor:"background",textColor:"text"}[e];n&&(this.customizations.colors[n]=t,document.getElementById(`${n}Preview`).textContent=t)}updateColorPreviews(){Object.entries(this.customizations.colors).forEach(([e,t])=>{const n=document.getElementById(`${e}Preview`);n&&(n.textContent=t)})}applyColorPalette(e){const t={sunset:{primary:"#FF6B35",secondary:"#F7931E",background:"#FFFFFF",text:"#2C2C2C"},ocean:{primary:"#006A6B",secondary:"#2E8BC0",background:"#FFFFFF",text:"#2C2C2C"},forest:{primary:"#2D5016",secondary:"#86C232",background:"#FFFFFF",text:"#2C2C2C"},monochrome:{primary:"#000000",secondary:"#666666",background:"#FFFFFF",text:"#2C2C2C"}}[e];t&&(this.customizations.colors=t,Object.entries(t).forEach(([e,t])=>{const n=document.getElementById(`${e}Color`);n&&(n.value=t)}),this.updateColorPreviews())}updateFont(e,t){this.customizations.fonts[e]=t,this.updateTypographyPreview()}updateFontSize(e,t){this.customizations.fonts[`${e}Size`]=`${t}px`,document.getElementById(`${e}SizeValue`).textContent=`${t}px`,this.updateTypographyPreview()}updateTypographyPreview(){const e=document.getElementById("previewTitle"),t=document.getElementById("previewText");e&&t&&(e.style.fontFamily=this.customizations.fonts.primary||"Poppins",e.style.fontSize=this.customizations.fonts.titleSize||"32px",t.style.fontFamily=this.customizations.fonts.secondary||"Open Sans",t.style.fontSize=this.customizations.fonts.textSize||"16px")}selectGridStyle(e){this.customizations.layout.gridStyle=e,document.querySelectorAll(".grid-option").forEach(e=>{e.classList.remove("selected")}),document.querySelector(`[data-grid="${e}"]`).classList.add("selected")}updateSpacing(e){this.customizations.layout.photoSpacing=`${e}px`,document.getElementById("spacingValue").textContent=`${e}px`}updateColumns(e,t){this.customizations.layout[`${e}Columns`]=parseInt(t),document.getElementById(`${e}ColumnsValue`).textContent=t}async handleLogoUpload(e){if(e)try{if(!e.type.startsWith("image/"))throw new Error("Por favor, selecione um arquivo de imagem válido");if(e.size>2097152)throw new Error("O arquivo deve ter no máximo 2MB");const t=new FileReader;t.onload=e=>{document.getElementById("logoPreview").innerHTML=`<img src="${e.target.result}" alt="Logo" style="max-width: 100%; max-height: 100%; border-radius: 8px;">`},t.readAsDataURL(e);const n=new FormData;n.append("logo",e);const a=await fetch("/api/photographer/logo",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`},body:n});if(!a.ok)throw new Error("Erro ao fazer upload do logo");const o=await a.json();this.customizations.branding.logoUrl=o.logoUrl}catch(e){console.error("Logo upload error:",e),alert(e.message)}}showGalleryPreview(){const e=document.getElementById("galleryPreview");document.getElementById("previewContent").innerHTML=this.generateGalleryPreview(),this.applyCustomizationsToPreview(),e.style.display="block",this.previewMode=!0}generateGalleryPreview(){return`\n            <div class="preview-gallery" id="previewGalleryContainer">\n                <header class="gallery-header">\n                    <div class="gallery-branding">\n                        <div class="gallery-logo">\n                            ${this.customizations.branding.logoUrl?`<img src="${this.customizations.branding.logoUrl}" alt="Logo">`:'<i class="bi bi-person-circle"></i>'}\n                        </div>\n                        <div class="gallery-info">\n                            <h1 class="gallery-title">${document.getElementById("galleryTitle").value||"Minha Galeria"}</h1>\n                            <p class="gallery-bio">${document.getElementById("galleryBio").value||"Fotógrafo profissional"}</p>\n                        </div>\n                    </div>\n                    <div class="gallery-social">\n                        ${this.generateSocialLinks()}\n                    </div>\n                </header>\n                \n                <div class="gallery-grid">\n                    ${this.generateSamplePhotos()}\n                </div>\n                \n                <footer class="gallery-footer">\n                    <div class="contact-info">\n                        <p><i class="bi bi-envelope"></i> ${document.getElementById("contactEmail").value||"contato@exemplo.com"}</p>\n                        <p><i class="bi bi-telephone"></i> ${document.getElementById("contactPhone").value||"(63) 99999-9999"}</p>\n                    </div>\n                </footer>\n            </div>\n        `}generateSocialLinks(){const e={instagram:document.getElementById("instagramHandle").value,facebook:document.getElementById("facebookUrl").value,twitter:document.getElementById("twitterHandle").value,linkedin:document.getElementById("linkedinUrl").value,youtube:document.getElementById("youtubeUrl").value,whatsapp:document.getElementById("whatsappNumber").value},t={instagram:"bi-instagram",facebook:"bi-facebook",twitter:"bi-twitter",linkedin:"bi-linkedin",youtube:"bi-youtube",whatsapp:"bi-whatsapp"};let n="";return Object.entries(e).forEach(([e,a])=>{a&&(n+=`<a href="#" class="social-link"><i class="bi ${t[e]}"></i></a>`)}),n}generateSamplePhotos(){return["https://images.unsplash.com/photo-1469474968028-56623f02e42e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","https://images.unsplash.com/photo-1502920917128-1aa500764cbd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","https://images.unsplash.com/photo-1519741497674-611481863552?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"].map(e=>`\n            <div class="gallery-item">\n                <img src="${e}" alt="Sample Photo" loading="lazy">\n                <div class="photo-overlay">\n                    <button class="btn btn-sm btn-primary">Ver Foto</button>\n                </div>\n            </div>\n        `).join("")}applyCustomizationsToPreview(){const e=document.getElementById("previewGalleryContainer");if(!e)return;const t=document.createElement("style");t.textContent=this.generateCustomCSS(),e.appendChild(t)}generateCustomCSS(){const{colors:e,fonts:t,layout:n}=this.customizations;return`\n            .preview-gallery {\n                background-color: ${e.background||"#FFFFFF"};\n                color: ${e.text||"#2C2C2C"};\n                font-family: ${t.secondary||"Open Sans"}, sans-serif;\n                padding: 2rem;\n            }\n            \n            .gallery-title {\n                color: ${e.primary||"#FFD700"};\n                font-family: ${t.primary||"Poppins"}, sans-serif;\n                font-size: ${t.titleSize||"32px"};\n            }\n            \n            .gallery-bio {\n                font-size: ${t.textSize||"16px"};\n            }\n            \n            .gallery-grid {\n                display: grid;\n                grid-template-columns: repeat(${n.desktopColumns||4}, 1fr);\n                gap: ${n.photoSpacing||"15px"};\n                margin: 2rem 0;\n            }\n            \n            .gallery-item {\n                position: relative;\n                overflow: hidden;\n                border-radius: 8px;\n                aspect-ratio: 1;\n            }\n            \n            .gallery-item img {\n                width: 100%;\n                height: 100%;\n                object-fit: cover;\n                transition: transform 0.3s ease;\n            }\n            \n            .gallery-item:hover img {\n                transform: scale(1.05);\n            }\n            \n            .photo-overlay {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(0,0,0,0.7);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                opacity: 0;\n                transition: opacity 0.3s ease;\n            }\n            \n            .gallery-item:hover .photo-overlay {\n                opacity: 1;\n            }\n            \n            .social-link {\n                color: ${e.secondary||"#FF8C00"};\n                font-size: 1.5rem;\n                margin: 0 0.5rem;\n                text-decoration: none;\n                transition: color 0.3s ease;\n            }\n            \n            .social-link:hover {\n                color: ${e.primary||"#FFD700"};\n            }\n            \n            @media (max-width: 768px) {\n                .gallery-grid {\n                    grid-template-columns: repeat(${n.mobileColumns||2}, 1fr);\n                }\n            }\n        `}closeGalleryPreview(){document.getElementById("galleryPreview").style.display="none",this.previewMode=!1}resetToDefaults(){confirm("Tem certeza que deseja resetar todas as personalizações?")&&(this.customizations={colors:{primary:"#FFD700",secondary:"#FF8C00",background:"#FFFFFF",text:"#2C2C2C"},fonts:{primary:"Poppins",secondary:"Open Sans",titleSize:"32px",textSize:"16px"},layout:{gridStyle:"masonry",photoSpacing:"15px",desktopColumns:4,mobileColumns:2},branding:{},social:{}},this.currentTheme="default",this.loadCurrentSettings())}loadCurrentSettings(){if(Object.entries(this.customizations.colors||{}).forEach(([e,t])=>{const n=document.getElementById(`${e}Color`);n&&(n.value=t)}),this.customizations.fonts){const e=document.getElementById("primaryFont"),t=document.getElementById("secondaryFont");e&&(e.value=this.customizations.fonts.primary||"Poppins"),t&&(t.value=this.customizations.fonts.secondary||"Open Sans")}this.updateColorPreviews(),this.updateTypographyPreview()}async saveSettings(){try{this.collectFormData(),await this.saveCustomizations(),alert("Personalizações salvas com sucesso!")}catch(e){console.error("Error saving settings:",e),alert("Erro ao salvar personalizações: "+e.message)}}collectFormData(){this.customizations.branding={...this.customizations.branding,title:document.getElementById("galleryTitle").value,bio:document.getElementById("galleryBio").value,email:document.getElementById("contactEmail").value,phone:document.getElementById("contactPhone").value,website:document.getElementById("contactWebsite").value},this.customizations.social={instagram:document.getElementById("instagramHandle").value,facebook:document.getElementById("facebookUrl").value,twitter:document.getElementById("twitterHandle").value,linkedin:document.getElementById("linkedinUrl").value,youtube:document.getElementById("youtubeUrl").value,whatsapp:document.getElementById("whatsappNumber").value,display:document.querySelector('input[name="socialDisplay"]:checked').value}}setupEventListeners(){}getAuthToken(){return localStorage.getItem("fotos63_auth_token")||""}generatePublicGalleryUrl(e){return`${window.location.origin}/gallery/${e}`}exportCustomizations(){const e={theme:this.currentTheme,customizations:this.customizations,exportedAt:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="fotos63-customizations.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}importCustomizations(e){const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);this.currentTheme=t.theme,this.customizations=t.customizations,this.loadCurrentSettings(),alert("Personalizações importadas com sucesso!")}catch(e){alert("Erro ao importar personalizações: arquivo inválido")}},t.readAsText(e)}}const galleryCustomization=new GalleryCustomizationSystem;"undefined"!=typeof module&&module.exports&&(module.exports=GalleryCustomizationSystem);