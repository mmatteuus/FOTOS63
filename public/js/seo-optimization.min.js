class SEOOptimizationSystem{constructor(){this.seoData={},this.galleryOptimizations={},this.keywords=[],this.competitors=[],this.initializeSystem()}initializeSystem(){this.loadSEOData(),this.setupMetaTags(),this.initializeImageOptimization(),this.setupStructuredData()}createSEOInterface(t){const e=document.getElementById(t);e&&(e.innerHTML='\n            <div class="seo-optimization">\n                <div class="seo-header">\n                    <h3><i class="bi bi-search"></i> SEO & Otimização</h3>\n                    <button class="btn btn-primary" onclick="runSEOAudit()">\n                        <i class="bi bi-speedometer2"></i> Auditoria SEO\n                    </button>\n                </div>\n\n                \x3c!-- SEO Dashboard --\x3e\n                <div class="seo-dashboard">\n                    <div class="seo-score-card">\n                        <div class="score-circle" id="seoScore">\n                            <span class="score-number">0</span>\n                            <span class="score-label">SEO Score</span>\n                        </div>\n                        <div class="score-details">\n                            <div class="score-item">\n                                <span class="label">Técnico</span>\n                                <div class="progress">\n                                    <div class="progress-bar bg-success" id="technicalScore" style="width: 0%"></div>\n                                </div>\n                            </div>\n                            <div class="score-item">\n                                <span class="label">Conteúdo</span>\n                                <div class="progress">\n                                    <div class="progress-bar bg-info" id="contentScore" style="width: 0%"></div>\n                                </div>\n                            </div>\n                            <div class="score-item">\n                                <span class="label">Performance</span>\n                                <div class="progress">\n                                    <div class="progress-bar bg-warning" id="performanceScore" style="width: 0%"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="seo-metrics">\n                        <div class="metric-card">\n                            <i class="bi bi-eye"></i>\n                            <h4 id="organicTraffic">0</h4>\n                            <p>Tráfego Orgânico</p>\n                        </div>\n                        <div class="metric-card">\n                            <i class="bi bi-graph-up"></i>\n                            <h4 id="keywordRankings">0</h4>\n                            <p>Palavras-chave Rankeadas</p>\n                        </div>\n                        <div class="metric-card">\n                            <i class="bi bi-link-45deg"></i>\n                            <h4 id="backlinks">0</h4>\n                            <p>Backlinks</p>\n                        </div>\n                        <div class="metric-card">\n                            <i class="bi bi-speedometer"></i>\n                            <h4 id="pageSpeed">0s</h4>\n                            <p>Velocidade da Página</p>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- SEO Tabs --\x3e\n                <div class="seo-tabs">\n                    <button class="tab-btn active" data-tab="keywords">Palavras-chave</button>\n                    <button class="tab-btn" data-tab="content">Otimização de Conteúdo</button>\n                    <button class="tab-btn" data-tab="technical">SEO Técnico</button>\n                    <button class="tab-btn" data-tab="gallery">Otimização de Galeria</button>\n                    <button class="tab-btn" data-tab="analytics">Analytics SEO</button>\n                </div>\n\n                \x3c!-- Keywords Tab --\x3e\n                <div class="tab-content active" id="keywords-tab">\n                    <div class="keywords-section">\n                        <div class="keywords-header">\n                            <h5>Pesquisa de Palavras-chave</h5>\n                            <button class="btn btn-outline-primary" onclick="researchKeywords()">\n                                <i class="bi bi-search"></i> Pesquisar Palavras-chave\n                            </button>\n                        </div>\n\n                        <div class="keyword-research">\n                            <div class="search-input">\n                                <input type="text" class="form-control" id="keywordInput" placeholder="Digite uma palavra-chave...">\n                                <button class="btn btn-primary" onclick="analyzeKeyword()">Analisar</button>\n                            </div>\n                        </div>\n\n                        <div class="keywords-table">\n                            <table class="table">\n                                <thead>\n                                    <tr>\n                                        <th>Palavra-chave</th>\n                                        <th>Volume de Busca</th>\n                                        <th>Dificuldade</th>\n                                        <th>CPC</th>\n                                        <th>Posição Atual</th>\n                                        <th>Ações</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="keywordsTableBody">\n                                    \x3c!-- Keywords data will be loaded here --\x3e\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Content Optimization Tab --\x3e\n                <div class="tab-content" id="content-tab">\n                    <div class="content-optimization">\n                        <h5>Otimização de Conteúdo</h5>\n                        \n                        <div class="content-analyzer">\n                            <div class="form-group">\n                                <label>URL da Página</label>\n                                <input type="url" class="form-control" id="pageUrl" placeholder="https://fotos63.com/galeria/casamento">\n                            </div>\n                            \n                            <div class="form-group">\n                                <label>Palavra-chave Principal</label>\n                                <input type="text" class="form-control" id="primaryKeyword" placeholder="fotografia de casamento">\n                            </div>\n                            \n                            <button class="btn btn-primary" onclick="analyzeContent()">\n                                <i class="bi bi-search"></i> Analisar Conteúdo\n                            </button>\n                        </div>\n\n                        <div class="content-suggestions" id="contentSuggestions">\n                            \x3c!-- Content suggestions will be shown here --\x3e\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Technical SEO Tab --\x3e\n                <div class="tab-content" id="technical-tab">\n                    <div class="technical-seo">\n                        <h5>SEO Técnico</h5>\n                        \n                        <div class="technical-checklist">\n                            <div class="checklist-item">\n                                <input type="checkbox" id="sitemap" checked>\n                                <label for="sitemap">Sitemap XML</label>\n                                <span class="status success">✓</span>\n                            </div>\n                            \n                            <div class="checklist-item">\n                                <input type="checkbox" id="robotstxt" checked>\n                                <label for="robotstxt">Robots.txt</label>\n                                <span class="status success">✓</span>\n                            </div>\n                            \n                            <div class="checklist-item">\n                                <input type="checkbox" id="ssl" checked>\n                                <label for="ssl">Certificado SSL</label>\n                                <span class="status success">✓</span>\n                            </div>\n                            \n                            <div class="checklist-item">\n                                <input type="checkbox" id="mobileFriendly" checked>\n                                <label for="mobileFriendly">Mobile-Friendly</label>\n                                <span class="status success">✓</span>\n                            </div>\n                            \n                            <div class="checklist-item">\n                                <input type="checkbox" id="pageSpeed">\n                                <label for="pageSpeed">Velocidade da Página</label>\n                                <span class="status warning">⚠</span>\n                            </div>\n                            \n                            <div class="checklist-item">\n                                <input type="checkbox" id="structuredData">\n                                <label for="structuredData">Dados Estruturados</label>\n                                <span class="status error">✗</span>\n                            </div>\n                        </div>\n\n                        <div class="technical-tools">\n                            <button class="btn btn-outline-primary" onclick="generateSitemap()">\n                                <i class="bi bi-file-code"></i> Gerar Sitemap\n                            </button>\n                            <button class="btn btn-outline-primary" onclick="testPageSpeed()">\n                                <i class="bi bi-speedometer2"></i> Testar Velocidade\n                            </button>\n                            <button class="btn btn-outline-primary" onclick="validateStructuredData()">\n                                <i class="bi bi-code-square"></i> Validar Schema\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Gallery Optimization Tab --\x3e\n                <div class="tab-content" id="gallery-tab">\n                    <div class="gallery-optimization">\n                        <h5>Otimização de Galeria</h5>\n                        \n                        <div class="optimization-tools">\n                            <div class="tool-card">\n                                <h6><i class="bi bi-image"></i> Otimização de Imagens</h6>\n                                <p>Compressão automática e redimensionamento</p>\n                                <div class="tool-stats">\n                                    <span>Economia: <strong>45%</strong></span>\n                                    <span>Imagens otimizadas: <strong>1,234</strong></span>\n                                </div>\n                                <button class="btn btn-sm btn-primary" onclick="optimizeImages()">Otimizar Todas</button>\n                            </div>\n\n                            <div class="tool-card">\n                                <h6><i class="bi bi-tags"></i> Alt Text Automático</h6>\n                                <p>Geração automática de texto alternativo</p>\n                                <div class="tool-stats">\n                                    <span>Cobertura: <strong>78%</strong></span>\n                                    <span>Imagens sem alt: <strong>156</strong></span>\n                                </div>\n                                <button class="btn btn-sm btn-primary" onclick="generateAltText()">Gerar Alt Text</button>\n                            </div>\n\n                            <div class="tool-card">\n                                <h6><i class="bi bi-lightning"></i> Lazy Loading</h6>\n                                <p>Carregamento sob demanda de imagens</p>\n                                <div class="tool-stats">\n                                    <span>Melhoria: <strong>60%</strong></span>\n                                    <span>Status: <strong class="text-success">Ativo</strong></span>\n                                </div>\n                                <button class="btn btn-sm btn-outline-secondary" disabled>Configurado</button>\n                            </div>\n\n                            <div class="tool-card">\n                                <h6><i class="bi bi-globe"></i> CDN Integration</h6>\n                                <p>Distribuição global de conteúdo</p>\n                                <div class="tool-stats">\n                                    <span>Latência: <strong>-40%</strong></span>\n                                    <span>Regiões: <strong>12</strong></span>\n                                </div>\n                                <button class="btn btn-sm btn-success" onclick="configureCDN()">Configurar CDN</button>\n                            </div>\n                        </div>\n\n                        <div class="gallery-seo-tips">\n                            <h6>Dicas de SEO para Galerias</h6>\n                            <ul class="tips-list">\n                                <li><i class="bi bi-check-circle text-success"></i> Use nomes de arquivo descritivos</li>\n                                <li><i class="bi bi-check-circle text-success"></i> Adicione alt text relevante</li>\n                                <li><i class="bi bi-check-circle text-success"></i> Otimize o tamanho das imagens</li>\n                                <li><i class="bi bi-check-circle text-success"></i> Use formatos modernos (WebP, AVIF)</li>\n                                <li><i class="bi bi-check-circle text-success"></i> Implemente lazy loading</li>\n                                <li><i class="bi bi-check-circle text-success"></i> Crie sitemaps de imagens</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Analytics Tab --\x3e\n                <div class="tab-content" id="analytics-tab">\n                    <div class="seo-analytics">\n                        <h5>Analytics SEO</h5>\n                        \n                        <div class="analytics-charts">\n                            <div class="chart-container">\n                                <h6>Tráfego Orgânico</h6>\n                                <canvas id="organicTrafficChart"></canvas>\n                            </div>\n                            \n                            <div class="chart-container">\n                                <h6>Posições das Palavras-chave</h6>\n                                <canvas id="keywordPositionsChart"></canvas>\n                            </div>\n                        </div>\n\n                        <div class="top-pages">\n                            <h6>Páginas com Melhor Performance</h6>\n                            <div class="pages-list" id="topPagesList">\n                                \x3c!-- Top pages will be loaded here --\x3e\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',this.setupSEOEvents(),this.loadSEOData())}setupSEOEvents(){document.querySelectorAll(".tab-btn").forEach(t=>{t.addEventListener("click",t=>{this.switchTab(t.target.dataset.tab)})}),document.getElementById("keywordInput").addEventListener("keypress",t=>{"Enter"===t.key&&this.analyzeKeyword()})}switchTab(t){document.querySelectorAll(".tab-btn").forEach(t=>t.classList.remove("active")),document.querySelector(`[data-tab="${t}"]`).classList.add("active"),document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active")),document.getElementById(`${t}-tab`).classList.add("active")}async loadSEOData(){try{const t=await fetch("/api/seo/data",{headers:{Authorization:`Bearer ${this.getAuthToken()}`}});t.ok&&(this.seoData=await t.json(),this.updateSEODashboard())}catch(t){console.error("Error loading SEO data:",t)}}updateSEODashboard(){const t=this.seoData;document.getElementById("seoScore").querySelector(".score-number").textContent=t.overall_score||0,document.getElementById("technicalScore").style.width=`${t.technical_score||0}%`,document.getElementById("contentScore").style.width=`${t.content_score||0}%`,document.getElementById("performanceScore").style.width=`${t.performance_score||0}%`,document.getElementById("organicTraffic").textContent=this.formatNumber(t.organic_traffic||0),document.getElementById("keywordRankings").textContent=t.keyword_rankings||0,document.getElementById("backlinks").textContent=this.formatNumber(t.backlinks||0),document.getElementById("pageSpeed").textContent=`${t.page_speed||0}s`}async runSEOAudit(){try{const t=await fetch("/api/seo/audit",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}});if(t.ok){const e=await t.json();this.displayAuditResults(e)}}catch(t){console.error("Error running SEO audit:",t)}}displayAuditResults(t){alert("Auditoria SEO concluída! Verifique os resultados no dashboard."),this.loadSEOData()}async researchKeywords(){const t=document.getElementById("keywordInput").value;if(t)try{const e=await fetch("/api/seo/keywords/research",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({keyword:t})});if(e.ok){const t=await e.json();this.displayKeywordResults(t)}}catch(t){console.error("Error researching keywords:",t)}}displayKeywordResults(t){document.getElementById("keywordsTableBody").innerHTML=t.keywords.map(t=>`\n            <tr>\n                <td>${t.term}</td>\n                <td>${this.formatNumber(t.search_volume)}</td>\n                <td><span class="badge bg-${this.getDifficultyColor(t.difficulty)}">${t.difficulty}</span></td>\n                <td>R$ ${t.cpc.toFixed(2)}</td>\n                <td>${t.current_position||"-"}</td>\n                <td>\n                    <button class="btn btn-sm btn-outline-primary" onclick="trackKeyword('${t.term}')">\n                        <i class="bi bi-plus"></i> Rastrear\n                    </button>\n                </td>\n            </tr>\n        `).join("")}getDifficultyColor(t){return t<=30?"success":t<=60?"warning":"danger"}analyzeKeyword(){this.researchKeywords()}async analyzeContent(){const t=document.getElementById("pageUrl").value,e=document.getElementById("primaryKeyword").value;if(t&&e)try{const a=await fetch("/api/seo/content/analyze",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({url:t,keyword:e})});if(a.ok){const t=await a.json();this.displayContentSuggestions(t)}}catch(t){console.error("Error analyzing content:",t)}else alert("Por favor, preencha a URL e a palavra-chave")}displayContentSuggestions(t){document.getElementById("contentSuggestions").innerHTML=`\n            <div class="suggestions-list">\n                <h6>Sugestões de Otimização</h6>\n                ${t.suggestions.map(t=>`\n                    <div class="suggestion-item ${t.priority}">\n                        <i class="bi ${this.getSuggestionIcon(t.type)}"></i>\n                        <div class="suggestion-content">\n                            <h6>${t.title}</h6>\n                            <p>${t.description}</p>\n                            ${t.action?`<button class="btn btn-sm btn-outline-primary">${t.action}</button>`:""}\n                        </div>\n                    </div>\n                `).join("")}\n            </div>\n        `}getSuggestionIcon(t){return{title:"bi-type-h1",meta:"bi-tag",content:"bi-file-text",images:"bi-image",links:"bi-link-45deg"}[t]||"bi-info-circle"}async generateSitemap(){try{(await fetch("/api/seo/sitemap/generate",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}})).ok&&alert("Sitemap gerado com sucesso!")}catch(t){console.error("Error generating sitemap:",t)}}async testPageSpeed(){try{const t=await fetch("/api/seo/pagespeed/test",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}});if(t.ok){const e=await t.json();this.displayPageSpeedResults(e)}}catch(t){console.error("Error testing page speed:",t)}}displayPageSpeedResults(t){alert(`Velocidade da página: ${t.score}/100\nTempo de carregamento: ${t.load_time}s`)}async validateStructuredData(){try{const t=await fetch("/api/seo/schema/validate",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}});if(t.ok){const e=await t.json();this.displaySchemaValidation(e)}}catch(t){console.error("Error validating schema:",t)}}displaySchemaValidation(t){const e=t.valid?"Válido":"Inválido";alert(`Dados estruturados: ${e}\nErros encontrados: ${t.errors.length}`)}async optimizeImages(){try{const t=await fetch("/api/seo/images/optimize",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}});if(t.ok){const e=await t.json();alert(`${e.optimized_count} imagens otimizadas!\nEconomia total: ${e.size_reduction}%`)}}catch(t){console.error("Error optimizing images:",t)}}async generateAltText(){try{const t=await fetch("/api/seo/images/alt-text",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}});if(t.ok){const e=await t.json();alert(`Alt text gerado para ${e.processed_count} imagens!`)}}catch(t){console.error("Error generating alt text:",t)}}async configureCDN(){try{(await fetch("/api/seo/cdn/configure",{method:"POST",headers:{Authorization:`Bearer ${this.getAuthToken()}`}})).ok&&alert("CDN configurado com sucesso!")}catch(t){console.error("Error configuring CDN:",t)}}async trackKeyword(t){try{(await fetch("/api/seo/keywords/track",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({keyword:t})})).ok&&alert(`Palavra-chave "${t}" adicionada ao rastreamento!`)}catch(t){console.error("Error tracking keyword:",t)}}setupMetaTags(){this.updateMetaTags({title:"Fotos63 - Marketplace de Fotos do Tocantins",description:"Encontre e compre fotos profissionais de eventos no Tocantins. Fotógrafos locais, qualidade garantida.",keywords:"fotografia, tocantins, eventos, casamento, formatura, fotos profissionais",ogTitle:"Fotos63 - Sua Memória em Foco",ogDescription:"O maior marketplace de fotos do Tocantins",ogImage:"/images/og-image.jpg"})}updateMetaTags(t){t.title&&(document.title=t.title),this.setMetaTag("description",t.description),this.setMetaTag("keywords",t.keywords),this.setMetaTag("og:title",t.ogTitle),this.setMetaTag("og:description",t.ogDescription),this.setMetaTag("og:image",t.ogImage),this.setMetaTag("twitter:card","summary_large_image"),this.setMetaTag("twitter:title",t.ogTitle),this.setMetaTag("twitter:description",t.ogDescription),this.setMetaTag("twitter:image",t.ogImage)}setMetaTag(t,e){if(!e)return;let a=document.querySelector(`meta[name="${t}"], meta[property="${t}"]`);a||(a=document.createElement("meta"),t.startsWith("og:")||t.startsWith("twitter:")?a.setAttribute("property",t):a.setAttribute("name",t),document.head.appendChild(a)),a.setAttribute("content",e)}initializeImageOptimization(){this.setupLazyLoading(),this.setupWebPSupport(),this.setupImageCompression()}setupLazyLoading(){if("IntersectionObserver"in window){const t=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const a=t.target;a.src=a.dataset.src,a.classList.remove("lazy"),e.unobserve(a)}})});document.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})}}setupWebPSupport(){this.checkWebPSupport()&&document.querySelectorAll("img").forEach(t=>{if(t.src&&!t.src.includes(".webp")){const e=t.src.replace(/\.(jpg|jpeg|png)$/i,".webp");this.checkImageExists(e).then(a=>{a&&(t.src=e)})}})}checkWebPSupport(){const t=document.createElement("canvas");return t.width=1,t.height=1,0===t.toDataURL("image/webp").indexOf("data:image/webp")}async checkImageExists(t){try{return(await fetch(t,{method:"HEAD"})).ok}catch{return!1}}setupImageCompression(){document.addEventListener("change",t=>{"file"===t.target.type&&t.target.accept&&t.target.accept.includes("image")&&this.compressImages(t.target.files)})}async compressImages(t){for(const e of t)if(e.type.startsWith("image/")){const t=await this.compressImage(e);console.log(`Compressed ${e.name}: ${e.size} -> ${t.size} bytes`)}}compressImage(t,e=.8){return new Promise(a=>{const n=document.createElement("canvas"),s=n.getContext("2d"),i=new Image;i.onload=()=>{let{width:o,height:c}=i;if(o>1920||c>1080){const t=Math.min(1920/o,1080/c);o*=t,c*=t}n.width=o,n.height=c,s.drawImage(i,0,0,o,c),n.toBlob(a,t.type,e)},i.src=URL.createObjectURL(t)})}setupStructuredData(){this.addStructuredData({"@context":"https://schema.org","@type":"WebSite",name:"Fotos63",description:"Marketplace de fotos profissionais do Tocantins",url:"https://fotos63.com",potentialAction:{"@type":"SearchAction",target:"https://fotos63.com/buscar?q={search_term_string}","query-input":"required name=search_term_string"},sameAs:["https://www.facebook.com/fotos63","https://www.instagram.com/fotos63","https://twitter.com/fotos63"]})}addStructuredData(t){const e=document.createElement("script");e.type="application/ld+json",e.textContent=JSON.stringify(t),document.head.appendChild(e)}formatNumber(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}getAuthToken(){return localStorage.getItem("fotos63_auth_token")||""}}function runSEOAudit(){seoOptimization.runSEOAudit()}function researchKeywords(){seoOptimization.researchKeywords()}function analyzeKeyword(){seoOptimization.analyzeKeyword()}function analyzeContent(){seoOptimization.analyzeContent()}function generateSitemap(){seoOptimization.generateSitemap()}function testPageSpeed(){seoOptimization.testPageSpeed()}function validateStructuredData(){seoOptimization.validateStructuredData()}function optimizeImages(){seoOptimization.optimizeImages()}function generateAltText(){seoOptimization.generateAltText()}function configureCDN(){seoOptimization.configureCDN()}function trackKeyword(t){seoOptimization.trackKeyword(t)}const seoOptimization=new SEOOptimizationSystem;"undefined"!=typeof module&&module.exports&&(module.exports=SEOOptimizationSystem);