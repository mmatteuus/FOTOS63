class PhysicalProductsSystem{constructor(){this.products=[],this.categories=[],this.customization={},this.shipping={},this.inventory={},this.initializeSystem()}initializeSystem(){this.loadProductCategories(),this.loadProducts(),this.setupCustomizationEngine(),this.setupShippingCalculator()}createProductsInterface(n){const t=document.getElementById(n);t&&(t.innerHTML='\n            <div class="physical-products">\n                <div class="products-header">\n                    <h3><i class="bi bi-box"></i> Produtos Físicos & Brindes</h3>\n                    <p>Transforme suas fotos em produtos únicos e aumente sua receita</p>\n                </div>\n\n                \x3c!-- Product Categories --\x3e\n                <div class="product-categories">\n                    <div class="category-tabs">\n                        <button class="tab-btn active" data-category="all">Todos</button>\n                        <button class="tab-btn" data-category="prints">Impressões</button>\n                        <button class="tab-btn" data-category="albums">Álbuns</button>\n                        <button class="tab-btn" data-category="canvas">Canvas</button>\n                        <button class="tab-btn" data-category="gifts">Brindes</button>\n                        <button class="tab-btn" data-category="apparel">Vestuário</button>\n                        <button class="tab-btn" data-category="accessories">Acessórios</button>\n                    </div>\n                </div>\n\n                \x3c!-- Products Grid --\x3e\n                <div class="products-grid" id="productsGrid">\n                    \x3c!-- Print Products --\x3e\n                    <div class="product-card" data-category="prints">\n                        <div class="product-image">\n                            <img src="/images/products/photo-print.jpg" alt="Impressão Fotográfica">\n                            <div class="product-overlay">\n                                <button class="btn btn-primary" onclick="customizeProduct(\'photo_print\')">Personalizar</button>\n                            </div>\n                        </div>\n                        <div class="product-info">\n                            <h5>Impressão Fotográfica</h5>\n                            <p>Papel fotográfico premium, várias dimensões</p>\n                            <div class="product-pricing">\n                                <span class="price-from">A partir de</span>\n                                <span class="price">R$ 8,90</span>\n                            </div>\n                            <div class="product-options">\n                                <span class="option">10x15cm</span>\n                                <span class="option">15x21cm</span>\n                                <span class="option">20x30cm</span>\n                                <span class="option">+</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Canvas Products --\x3e\n                    <div class="product-card" data-category="canvas">\n                        <div class="product-image">\n                            <img src="/images/products/canvas.jpg" alt="Canvas">\n                            <div class="product-overlay">\n                                <button class="btn btn-primary" onclick="customizeProduct(\'canvas\')">Personalizar</button>\n                            </div>\n                        </div>\n                        <div class="product-info">\n                            <h5>Canvas Premium</h5>\n                            <p>Tela canvas com bastidor de madeira</p>\n                            <div class="product-pricing">\n                                <span class="price-from">A partir de</span>\n                                <span class="price">R$ 45,90</span>\n                            </div>\n                            <div class="product-options">\n                                <span class="option">30x40cm</span>\n                                <span class="option">40x60cm</span>\n                                <span class="option">60x80cm</span>\n                                <span class="option">+</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Album Products --\x3e\n                    <div class="product-card" data-category="albums">\n                        <div class="product-image">\n                            <img src="/images/products/photo-album.jpg" alt="Álbum de Fotos">\n                            <div class="product-overlay">\n                                <button class="btn btn-primary" onclick="customizeProduct(\'album\')">Personalizar</button>\n                            </div>\n                        </div>\n                        <div class="product-info">\n                            <h5>Álbum de Fotos</h5>\n                            <p>Álbum personalizado com capa dura</p>\n                            <div class="product-pricing">\n                                <span class="price-from">A partir de</span>\n                                <span class="price">R$ 89,90</span>\n                            </div>\n                            <div class="product-options">\n                                <span class="option">20 páginas</span>\n                                <span class="option">40 páginas</span>\n                                <span class="option">60 páginas</span>\n                                <span class="option">+</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Gift Products --\x3e\n                    <div class="product-card" data-category="gifts">\n                        <div class="product-image">\n                            <img src="/images/products/mug.jpg" alt="Caneca Personalizada">\n                            <div class="product-overlay">\n                                <button class="btn btn-primary" onclick="customizeProduct(\'mug\')">Personalizar</button>\n                            </div>\n                        </div>\n                        <div class="product-info">\n                            <h5>Caneca Personalizada</h5>\n                            <p>Caneca de porcelana com sua foto</p>\n                            <div class="product-pricing">\n                                <span class="price-from">A partir de</span>\n                                <span class="price">R$ 24,90</span>\n                            </div>\n                            <div class="product-options">\n                                <span class="option">Branca</span>\n                                <span class="option">Colorida</span>\n                                <span class="option">Mágica</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Apparel Products --\x3e\n                    <div class="product-card" data-category="apparel">\n                        <div class="product-image">\n                            <img src="/images/products/t-shirt.jpg" alt="Camiseta Personalizada">\n                            <div class="product-overlay">\n                                <button class="btn btn-primary" onclick="customizeProduct(\'tshirt\')">Personalizar</button>\n                            </div>\n                        </div>\n                        <div class="product-info">\n                            <h5>Camiseta Personalizada</h5>\n                            <p>100% algodão, impressão digital</p>\n                            <div class="product-pricing">\n                                <span class="price-from">A partir de</span>\n                                <span class="price">R$ 39,90</span>\n                            </div>\n                            <div class="product-options">\n                                <span class="option">P</span>\n                                <span class="option">M</span>\n                                <span class="option">G</span>\n                                <span class="option">+</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Accessories --\x3e\n                    <div class="product-card" data-category="accessories">\n                        <div class="product-image">\n                            <img src="/images/products/keychain.jpg" alt="Chaveiro Personalizado">\n                            <div class="product-overlay">\n                                <button class="btn btn-primary" onclick="customizeProduct(\'keychain\')">Personalizar</button>\n                            </div>\n                        </div>\n                        <div class="product-info">\n                            <h5>Chaveiro Personalizado</h5>\n                            <p>Acrílico resistente com sua foto</p>\n                            <div class="product-pricing">\n                                <span class="price-from">A partir de</span>\n                                <span class="price">R$ 12,90</span>\n                            </div>\n                            <div class="product-options">\n                                <span class="option">Redondo</span>\n                                <span class="option">Quadrado</span>\n                                <span class="option">Coração</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Bulk Order Section --\x3e\n                <div class="bulk-orders">\n                    <h5><i class="bi bi-boxes"></i> Pedidos em Lote</h5>\n                    <p>Descontos especiais para grandes quantidades</p>\n                    \n                    <div class="bulk-calculator">\n                        <div class="calculator-inputs">\n                            <div class="input-group">\n                                <label>Produto</label>\n                                <select class="form-select" id="bulkProduct">\n                                    <option value="photo_print">Impressão Fotográfica</option>\n                                    <option value="canvas">Canvas</option>\n                                    <option value="mug">Caneca</option>\n                                    <option value="tshirt">Camiseta</option>\n                                </select>\n                            </div>\n                            \n                            <div class="input-group">\n                                <label>Quantidade</label>\n                                <input type="number" class="form-control" id="bulkQuantity" min="10" value="50">\n                            </div>\n                            \n                            <div class="input-group">\n                                <label>Tamanho/Tipo</label>\n                                <select class="form-select" id="bulkSize">\n                                    <option value="standard">Padrão</option>\n                                    <option value="large">Grande</option>\n                                    <option value="premium">Premium</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div class="bulk-results" id="bulkResults">\n                            \x3c!-- Bulk pricing results will be shown here --\x3e\n                        </div>\n\n                        <button class="btn btn-success" onclick="requestBulkQuote()">\n                            <i class="bi bi-calculator"></i> Solicitar Orçamento\n                        </button>\n                    </div>\n                </div>\n\n                \x3c!-- Photographer Tools --\x3e\n                <div class="photographer-tools">\n                    <h5><i class="bi bi-tools"></i> Ferramentas para Fotógrafos</h5>\n                    \n                    <div class="tools-grid">\n                        <div class="tool-card">\n                            <i class="bi bi-palette"></i>\n                            <h6>Designer de Produtos</h6>\n                            <p>Crie templates personalizados para seus clientes</p>\n                            <button class="btn btn-outline-primary" onclick="openProductDesigner()">Abrir Designer</button>\n                        </div>\n\n                        <div class="tool-card">\n                            <i class="bi bi-tags"></i>\n                            <h6>Configurar Preços</h6>\n                            <p>Defina margens e preços para seus produtos</p>\n                            <button class="btn btn-outline-primary" onclick="configurePricing()">Configurar</button>\n                        </div>\n\n                        <div class="tool-card">\n                            <i class="bi bi-truck"></i>\n                            <h6>Gestão de Entregas</h6>\n                            <p>Acompanhe pedidos e entregas</p>\n                            <button class="btn btn-outline-primary" onclick="manageDeliveries()">Gerenciar</button>\n                        </div>\n\n                        <div class="tool-card">\n                            <i class="bi bi-graph-up"></i>\n                            <h6>Relatórios de Vendas</h6>\n                            <p>Analise performance dos produtos</p>\n                            <button class="btn btn-outline-primary" onclick="viewProductReports()">Ver Relatórios</button>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Product Customization Modal --\x3e\n                <div class="modal fade" id="customizationModal" tabindex="-1">\n                    <div class="modal-dialog modal-xl">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <h5 class="modal-title">Personalizar Produto</h5>\n                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                            </div>\n                            <div class="modal-body">\n                                <div class="customization-interface" id="customizationInterface">\n                                    \x3c!-- Customization interface will be loaded here --\x3e\n                                </div>\n                            </div>\n                            <div class="modal-footer">\n                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>\n                                <button type="button" class="btn btn-primary" onclick="addToCart()">\n                                    <i class="bi bi-cart-plus"></i> Adicionar ao Carrinho\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Bulk Quote Modal --\x3e\n                <div class="modal fade" id="bulkQuoteModal" tabindex="-1">\n                    <div class="modal-dialog">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <h5 class="modal-title">Orçamento em Lote</h5>\n                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n                            </div>\n                            <div class="modal-body">\n                                <form id="bulkQuoteForm">\n                                    <div class="form-group">\n                                        <label>Nome da Empresa/Evento</label>\n                                        <input type="text" class="form-control" id="companyName" required>\n                                    </div>\n                                    \n                                    <div class="form-group">\n                                        <label>Email de Contato</label>\n                                        <input type="email" class="form-control" id="contactEmail" required>\n                                    </div>\n                                    \n                                    <div class="form-group">\n                                        <label>Telefone</label>\n                                        <input type="tel" class="form-control" id="contactPhone">\n                                    </div>\n                                    \n                                    <div class="form-group">\n                                        <label>Detalhes do Pedido</label>\n                                        <textarea class="form-control" id="orderDetails" rows="4" placeholder="Descreva seu pedido em detalhes..."></textarea>\n                                    </div>\n                                    \n                                    <div class="form-group">\n                                        <label>Data de Entrega Desejada</label>\n                                        <input type="date" class="form-control" id="deliveryDate">\n                                    </div>\n                                </form>\n                            </div>\n                            <div class="modal-footer">\n                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>\n                                <button type="button" class="btn btn-success" onclick="submitBulkQuote()">\n                                    <i class="bi bi-send"></i> Enviar Solicitação\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',this.setupProductsEvents(),this.loadProducts(),this.calculateBulkPricing())}setupProductsEvents(){document.querySelectorAll(".category-tabs .tab-btn").forEach(n=>{n.addEventListener("click",n=>{this.filterByCategory(n.target.dataset.category)})}),["bulkProduct","bulkQuantity","bulkSize"].forEach(n=>{document.getElementById(n).addEventListener("change",()=>{this.calculateBulkPricing()})})}filterByCategory(n){document.querySelectorAll(".category-tabs .tab-btn").forEach(n=>{n.classList.remove("active")}),document.querySelector(`[data-category="${n}"]`).classList.add("active"),document.querySelectorAll(".product-card").forEach(t=>{"all"===n||t.dataset.category===n?t.style.display="block":t.style.display="none"})}customizeProduct(n){this.currentProduct=n,this.loadCustomizationInterface(n);new bootstrap.Modal(document.getElementById("customizationModal")).show()}loadCustomizationInterface(n){const t=document.getElementById("customizationInterface"),a={photo_print:this.createPrintCustomization(),canvas:this.createCanvasCustomization(),album:this.createAlbumCustomization(),mug:this.createMugCustomization(),tshirt:this.createTShirtCustomization(),keychain:this.createKeychainCustomization()};t.innerHTML=a[n]||this.createGenericCustomization(),this.setupCustomizationEvents()}createPrintCustomization(){return'\n            <div class="customization-content">\n                <div class="product-preview">\n                    <div class="preview-area">\n                        <img id="previewImage" src="/images/placeholder-photo.jpg" alt="Preview">\n                    </div>\n                    <div class="preview-controls">\n                        <button class="btn btn-sm btn-outline-primary" onclick="uploadPhoto()">\n                            <i class="bi bi-upload"></i> Carregar Foto\n                        </button>\n                        <button class="btn btn-sm btn-outline-secondary" onclick="selectFromGallery()">\n                            <i class="bi bi-images"></i> Da Galeria\n                        </button>\n                    </div>\n                </div>\n                \n                <div class="customization-options">\n                    <h6>Opções de Personalização</h6>\n                    \n                    <div class="option-group">\n                        <label>Tamanho</label>\n                        <div class="size-options">\n                            <input type="radio" name="size" id="size1" value="10x15" checked>\n                            <label for="size1">10x15cm - R$ 8,90</label>\n                            \n                            <input type="radio" name="size" id="size2" value="15x21">\n                            <label for="size2">15x21cm - R$ 12,90</label>\n                            \n                            <input type="radio" name="size" id="size3" value="20x30">\n                            <label for="size3">20x30cm - R$ 18,90</label>\n                            \n                            <input type="radio" name="size" id="size4" value="30x40">\n                            <label for="size4">30x40cm - R$ 28,90</label>\n                        </div>\n                    </div>\n                    \n                    <div class="option-group">\n                        <label>Papel</label>\n                        <select class="form-select" id="paperType">\n                            <option value="glossy">Brilhante</option>\n                            <option value="matte">Fosco</option>\n                            <option value="pearl">Pérola</option>\n                        </select>\n                    </div>\n                    \n                    <div class="option-group">\n                        <label>Quantidade</label>\n                        <input type="number" class="form-control" id="quantity" value="1" min="1">\n                    </div>\n                    \n                    <div class="option-group">\n                        <label>Observações</label>\n                        <textarea class="form-control" id="notes" rows="3" placeholder="Instruções especiais..."></textarea>\n                    </div>\n                </div>\n                \n                <div class="pricing-summary">\n                    <div class="price-breakdown">\n                        <div class="price-item">\n                            <span>Preço unitário:</span>\n                            <span id="unitPrice">R$ 8,90</span>\n                        </div>\n                        <div class="price-item">\n                            <span>Quantidade:</span>\n                            <span id="itemQuantity">1</span>\n                        </div>\n                        <div class="price-item total">\n                            <span>Total:</span>\n                            <span id="totalPrice">R$ 8,90</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '}createCanvasCustomization(){return'\n            <div class="customization-content">\n                <div class="product-preview">\n                    <div class="preview-area canvas-preview">\n                        <img id="previewImage" src="/images/placeholder-photo.jpg" alt="Preview">\n                        <div class="canvas-frame"></div>\n                    </div>\n                    <div class="preview-controls">\n                        <button class="btn btn-sm btn-outline-primary" onclick="uploadPhoto()">\n                            <i class="bi bi-upload"></i> Carregar Foto\n                        </button>\n                        <button class="btn btn-sm btn-outline-secondary" onclick="selectFromGallery()">\n                            <i class="bi bi-images"></i> Da Galeria\n                        </button>\n                    </div>\n                </div>\n                \n                <div class="customization-options">\n                    <h6>Opções de Canvas</h6>\n                    \n                    <div class="option-group">\n                        <label>Tamanho</label>\n                        <div class="size-options">\n                            <input type="radio" name="canvasSize" id="canvas1" value="30x40" checked>\n                            <label for="canvas1">30x40cm - R$ 45,90</label>\n                            \n                            <input type="radio" name="canvasSize" id="canvas2" value="40x60">\n                            <label for="canvas2">40x60cm - R$ 69,90</label>\n                            \n                            <input type="radio" name="canvasSize" id="canvas3" value="60x80">\n                            <label for="canvas3">60x80cm - R$ 98,90</label>\n                            \n                            <input type="radio" name="canvasSize" id="canvas4" value="80x120">\n                            <label for="canvas4">80x120cm - R$ 149,90</label>\n                        </div>\n                    </div>\n                    \n                    <div class="option-group">\n                        <label>Espessura do Bastidor</label>\n                        <select class="form-select" id="frameThickness">\n                            <option value="2cm">2cm - Padrão</option>\n                            <option value="4cm">4cm - Premium (+R$ 15,00)</option>\n                        </select>\n                    </div>\n                    \n                    <div class="option-group">\n                        <label>Acabamento</label>\n                        <select class="form-select" id="canvasFinish">\n                            <option value="standard">Padrão</option>\n                            <option value="uv">Proteção UV (+R$ 10,00)</option>\n                            <option value="varnish">Verniz (+R$ 20,00)</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        '}createMugCustomization(){return'\n            <div class="customization-content">\n                <div class="product-preview">\n                    <div class="preview-area mug-preview">\n                        <div class="mug-3d">\n                            <img id="previewImage" src="/images/placeholder-photo.jpg" alt="Preview">\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="customization-options">\n                    <h6>Opções da Caneca</h6>\n                    \n                    <div class="option-group">\n                        <label>Tipo</label>\n                        <div class="mug-types">\n                            <input type="radio" name="mugType" id="mug1" value="white" checked>\n                            <label for="mug1">Branca - R$ 24,90</label>\n                            \n                            <input type="radio" name="mugType" id="mug2" value="colored">\n                            <label for="mug2">Colorida - R$ 29,90</label>\n                            \n                            <input type="radio" name="mugType" id="mug3" value="magic">\n                            <label for="mug3">Mágica - R$ 34,90</label>\n                        </div>\n                    </div>\n                    \n                    <div class="option-group">\n                        <label>Posição da Imagem</label>\n                        <select class="form-select" id="imagePosition">\n                            <option value="center">Centro</option>\n                            <option value="wrap">Volta Completa (+R$ 5,00)</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n        '}setupCustomizationEvents(){document.querySelectorAll('input[type="radio"]').forEach(n=>{n.addEventListener("change",()=>{this.updatePricing()})}),document.querySelectorAll("select").forEach(n=>{n.addEventListener("change",()=>{this.updatePricing()})});const n=document.getElementById("quantity");n&&n.addEventListener("input",()=>{this.updatePricing()})}updatePricing(){const n=document.getElementById("unitPrice"),t=document.getElementById("itemQuantity"),a=document.getElementById("totalPrice");if(n&&t&&a){const e=parseInt(document.getElementById("quantity").value)||1,s=8.9,o=s*e;n.textContent=`R$ ${s.toFixed(2)}`,t.textContent=e,a.textContent=`R$ ${o.toFixed(2)}`}}calculateBulkPricing(){const n=document.getElementById("bulkProduct").value,t=parseInt(document.getElementById("bulkQuantity").value)||0,a=(document.getElementById("bulkSize").value,{photo_print:8.9,canvas:45.9,mug:24.9,tshirt:39.9}[n]||0);let e=0;t>=100?e=.25:t>=50?e=.2:t>=25?e=.15:t>=10&&(e=.1);const s=a*(1-e),o=s*t,i=(a-s)*t;document.getElementById("bulkResults").innerHTML=`\n            <div class="bulk-pricing">\n                <div class="pricing-item">\n                    <span>Preço unitário:</span>\n                    <span>R$ ${s.toFixed(2)}</span>\n                </div>\n                <div class="pricing-item">\n                    <span>Desconto:</span>\n                    <span class="text-success">${(100*e).toFixed(0)}%</span>\n                </div>\n                <div class="pricing-item">\n                    <span>Economia total:</span>\n                    <span class="text-success">R$ ${i.toFixed(2)}</span>\n                </div>\n                <div class="pricing-item total">\n                    <span>Total:</span>\n                    <span>R$ ${o.toFixed(2)}</span>\n                </div>\n            </div>\n        `}requestBulkQuote(){new bootstrap.Modal(document.getElementById("bulkQuoteModal")).show()}async submitBulkQuote(){try{const n={company_name:document.getElementById("companyName").value,contact_email:document.getElementById("contactEmail").value,contact_phone:document.getElementById("contactPhone").value,order_details:document.getElementById("orderDetails").value,delivery_date:document.getElementById("deliveryDate").value,product:document.getElementById("bulkProduct").value,quantity:document.getElementById("bulkQuantity").value,size:document.getElementById("bulkSize").value};if((await fetch("/api/products/bulk-quote",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify(n)})).ok){alert("Solicitação de orçamento enviada com sucesso! Entraremos em contato em breve.");bootstrap.Modal.getInstance(document.getElementById("bulkQuoteModal")).hide()}}catch(n){console.error("Error submitting bulk quote:",n),alert("Erro ao enviar solicitação")}}addToCart(){alert("Produto adicionado ao carrinho!");bootstrap.Modal.getInstance(document.getElementById("customizationModal")).hide()}uploadPhoto(){const n=document.createElement("input");n.type="file",n.accept="image/*",n.onchange=n=>{const t=n.target.files[0];if(t){const n=new FileReader;n.onload=n=>{document.getElementById("previewImage").src=n.target.result},n.readAsDataURL(t)}},n.click()}selectFromGallery(){alert("Funcionalidade de seleção da galeria em desenvolvimento")}openProductDesigner(){alert("Designer de produtos em desenvolvimento")}configurePricing(){alert("Configuração de preços em desenvolvimento")}manageDeliveries(){alert("Gestão de entregas em desenvolvimento")}viewProductReports(){alert("Relatórios de produtos em desenvolvimento")}async loadProducts(){try{const n=await fetch("/api/products/list",{headers:{Authorization:`Bearer ${this.getAuthToken()}`}});n.ok&&(this.products=await n.json())}catch(n){console.error("Error loading products:",n)}}getAuthToken(){return localStorage.getItem("fotos63_auth_token")||""}}function customizeProduct(n){physicalProducts.customizeProduct(n)}function requestBulkQuote(){physicalProducts.requestBulkQuote()}function submitBulkQuote(){physicalProducts.submitBulkQuote()}function addToCart(){physicalProducts.addToCart()}function uploadPhoto(){physicalProducts.uploadPhoto()}function selectFromGallery(){physicalProducts.selectFromGallery()}function openProductDesigner(){physicalProducts.openProductDesigner()}function configurePricing(){physicalProducts.configurePricing()}function manageDeliveries(){physicalProducts.manageDeliveries()}function viewProductReports(){physicalProducts.viewProductReports()}const physicalProducts=new PhysicalProductsSystem;"undefined"!=typeof module&&module.exports&&(module.exports=PhysicalProductsSystem);